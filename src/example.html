<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Stickyfy Demo</title>
</head>
<body>
    <style>
    html, body{
        width: 100%;
        margin: 0;
    }
    *{
        box-sizing: border-box;
    }
    .stickyfy{
        position: sticky;
        top: 100px;
        bottom: 100px;
    }
    </style>

    <article style="height: 400vh;">
        <div style="height: 150vh; background-color: grey"></div>
        <div class="stickyfy" style="padding: 20px; background-color: black; color: white; text-align: center">
            Not Sticky
        </div>
        <div style="height: 150vh; background-color: grey"></div>
    </article>

    <script>
       !function(){this.Stickyfy=function(){var t={toggleClass:"stuck",onStuck:null,onUnStuck:null,selector:".stickyfy"};function e(e,n,o,r){var i={},a="0px",s="0px";if(parseInt(o)>0){var c=o.indexOf("px")>0?"px":"%";a=-1*(parseInt(o)+n+1)+c}if(parseInt(r)>0){c=r.indexOf("px")>0?"px":"%";s=-1*(parseInt(r)+n+1)+c}i.rootMargin=a+" 0px "+s+" 0px";var u=t.toggleClass;new IntersectionObserver(e=>{e.forEach(function(e){e.target.classList.contains(u)||0!==e.intersectionRatio?e.target.classList.contains(u)&&(t.onUnStuck&&"function"==typeof t.onUnStuck&&t.onUnStuck(e.target),e.target.classList.remove(u)):(parseInt(o)&&Math.floor(e.boundingClientRect.y)===parseInt(o)||parseInt(r)&&Math.ceil(e.boundingClientRect.y)===window.innerHeight-parseInt(r)-n)&&(e.target.classList.add(u),t.onStuck&&"function"==typeof t.onStuck&&t.onStuck(e.target))})},i).observe(e)}arguments[0]&&"object"==typeof arguments[0]&&(this.options=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(t,arguments[0])),Stickyfy.prototype.init=function(){ua=window.navigator.userAgent,!(ua.indexOf("MSIE ")>-1||ua.indexOf("Trident/")>-1)&&window.IntersectionObserver&&function(){var n=t.selector?document.querySelectorAll(t.selector):document.getElementsByTagName("*"),o=Array.from(n);for(i=0;i<o.length;i++){var r=o[i],a=window.getComputedStyle(r,null);"sticky"===a.getPropertyValue("position")&&e(r,r.offsetHeight,a.getPropertyValue("top"),a.getPropertyValue("bottom"))}}()}}}();
        
       new Stickyfy({
            onStuck: function(el){
                el.innerHTML = "Sticky";
            },
            onUnStuck: function(el){
                el.innerHTML = "Not Sticky";
            },
        }).init();
    </script>
</body>
</html>
